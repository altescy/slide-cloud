(function(e){function t(t){for(var i,a,o=t[0],c=t[1],u=t[2],d=0,m=[];d<o.length;d++)a=o[d],s[a]&&m.push(s[a][0]),s[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(t);while(m.length)m.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(i=!1)}i&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},s={app:0},r=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"06cb":function(e,t,n){},"0993":function(e,t,n){},"105a":function(e,t,n){"use strict";var i=n("06cb"),s=n.n(i);s.a},"2eee":function(e,t,n){},"599f":function(e,t,n){},"5d6c":function(e,t,n){"use strict";var i=n("ca02"),s=n.n(i);s.a},6452:function(e,t,n){"use strict";var i=n("aa68"),s=n.n(i);s.a},"681f":function(e,t,n){"use strict";var i=n("e838"),s=n.n(i);s.a},"87ce":function(e,t,n){"use strict";var i=n("599f"),s=n.n(i);s.a},aa68:function(e,t,n){},b36b:function(e,t,n){"use strict";var i=n("2eee"),s=n.n(i);s.a},b72f:function(e,t,n){"use strict";var i=n("0993"),s=n.n(i);s.a},c0ec:function(e,t,n){},ca02:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var i=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mdl-layout mdl-js-layout mdl-layout--fixed-header has-drawer is-upgraded is-small-screen",attrs:{id:"app"}},[n("Header"),n("Drawer"),n("div",{staticClass:"main-editor-container mdl-layout__content"},[n("router-view")],1),e.isModalOpen?n("Modal"):e._e()],1)},r=[],a=n("9ab4"),o=n("2f62"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{class:["show"===e.view_mode?"hovershow":"","mdl-layout__header"]},[e._m(0),n("div",{staticClass:"mdl-layout__header-row"},[n("span",{staticClass:"mdl-layout-title"},[e._v("SlideCloud")]),n("div",{staticClass:"mdl-layout-spacer"}),n("button",{staticClass:"mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect",on:{click:function(t){return e.toggleViewMode()}}},[n("i",{staticClass:"material-icons"},[e._v(e._s("show"==e.view_mode?"fullscreen_exit":"fullscreen"))])]),e._m(1),e.user?n("ul",{staticClass:"mdl-menu mdl-js-menu mdl-menu--bottom-right mdl-js-ripple-effect",attrs:{for:"more-button"}},[n("li",{staticClass:"mdl-menu__item"},[e._v(e._s(e.user.name))]),n("li",{staticClass:"mdl-menu__item",on:{click:function(t){return e.signout()}}},[e._v("Sign Out")])]):n("ul",{staticClass:"mdl-menu mdl-js-menu mdl-menu--bottom-right mdl-js-ripple-effect",attrs:{for:"more-button"}},[n("li",{staticClass:"mdl-menu__item",on:{click:function(t){return e.openSignupModal()}}},[e._v("Sign Up")]),n("li",{staticClass:"mdl-menu__item",on:{click:function(t){return e.openSigninModal()}}},[e._v("Sign In")])])])])},u=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mdl-layout__drawer-button"},[n("i",{staticClass:"material-icons"},[e._v("dehaze")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect",attrs:{id:"more-button"}},[n("i",{staticClass:"material-icons"},[e._v("more_vert")])])}],l="OPEN_SIGNUP_ MODAL",d="OPEN_SIGNIN_MODAL",m="SIGN_UP",p="SIGN_IN",f="SIGN_OUT",v="FETCH_SLIDES",_="LOAD_SLIDE",h="OPEN_MODAL",w="CLOSE_MODAL",g="SET_MODAL_TYPE",b="SHOW_SIGNIN_ERROR",S="HIDE_SIGNIN_ERROR",E="SHOW_SIGNUP_ERROR",C="HIDE_SIGNUP_ERROR",O="SET_USER",y="UNSET_USER",j="SET_SLIDES",x="UNSET_SLIDES",M="CHANGE_VIEW_MODE",N="TOGGLE_VIEW_MODE",k="CHANGE_EDITOR_CONTENT",R="CHANGE_SLIDE_NUMBER",T=i["a"].extend({name:"Header",computed:a["a"]({},Object(o["e"])(["user","view_mode"])),methods:a["a"]({},Object(o["d"])({toggleViewMode_:N}),Object(o["b"])({openSigninModal:d,openSignupModal:l,signout:f}),{toggleViewMode:function(){var e=window.document.documentElement;"edit"===this.view_mode?e.requestFullscreen.apply(e):window.document.exitFullscreen(),this.toggleViewMode_()}})}),I=T,D=(n("105a"),n("2877")),P=Object(D["a"])(I,c,u,!1,null,"315671b0",null),L=P.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mdl-layout__drawer",attrs:{id:"drawer"}},[n("span",{staticClass:"mdl-layout-title"},[e._v("SlideCloud")]),n("ul",{staticClass:"slide-list demo-list-control mdl-list"},e._l(e.slides,function(t){return n("li",{staticClass:"mdl-list__item mdl-list__item--two-line",on:{click:function(n){return e.loadSlide(t)}}},[n("span",{staticClass:"slide-info mdl-list__item-primary-content"},[n("span",[e._v(e._s(t.name))]),n("span",{staticClass:"mdl-list__item-sub-title"},[e._v(e._s(t.updated_at))])]),t.public?n("span",{staticClass:"mdl-list__item-secondary-content"},[n("span",{staticClass:"mdl-list__item-secondary-info"},[e._v("public")]),n("i",{staticClass:"material-icons"},[e._v("public")])]):e._e()])}),0),n("div",{staticClass:"mdl-layout-spacer"}),n("div",{staticClass:"drawer-footer"},[n("div",{staticClass:"operation",on:{click:function(t){return e.hideDrwer()}}},[n("i",{staticClass:"material-icons"},[e._v("note_add")]),n("span",[e._v("Add new slide")])])])])},$=[],A=i["a"].extend({name:"Drawer",computed:a["a"]({},Object(o["e"])(["user","slides"])),methods:a["a"]({},Object(o["b"])({loadSlide_:_}),{hideDrwer:function(){var e=document.getElementById("drawer");null!=e&&e.classList.remove("is-visible");var t=document.getElementsByClassName("mdl-layout__obfuscator");t.length>0&&t[0].classList.remove("is-visible")},loadSlide:function(e){this.loadSlide_(e),this.hideDrwer()}})}),G=A,U=(n("b36b"),Object(D["a"])(G,H,$,!1,null,null,null)),V=U.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal",on:{click:function(t){return t.target!==t.currentTarget?null:e.closeModal()}}},[n("div",{staticClass:"content"},["signup"===e.modalType?n("SignupForm"):"signin"===e.modalType?n("SigninForm"):e._e()],1)])},W=[],B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.hasSignupError?n("p",{staticClass:"error-message"},[e._v("Failed to regiser")]):e._e(),n("div",{staticClass:"row"},[e._v("\n    username\n    "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"input",attrs:{type:"text"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),n("div",{staticClass:"row"},[e._v("\n    password\n    "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input",attrs:{type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),n("button",{staticClass:"button",on:{click:function(t){return t.preventDefault(),e.postSignup()}}},[e._v("register")])])},q=[],z=i["a"].extend({name:"SignupForm",data:function(){return{username:"",password:""}},computed:a["a"]({},Object(o["e"])(["hasSignupError"])),methods:a["a"]({},Object(o["b"])({signup:m}),Object(o["d"])({hideSignupError:C}),{postSignup:function(){return a["b"](this,void 0,void 0,function(){var e;return a["c"](this,function(t){return e={username:this.username,password:this.password},this.signup(e),[2]})})}}),watch:{username:function(){this.hideSignupError()},password:function(){this.hideSignupError()}}}),J=z,K=(n("5d6c"),Object(D["a"])(J,B,q,!1,null,"33cf20da",null)),X=K.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.hasSigninError?n("p",{staticClass:"error-message"},[e._v("Failed to login")]):e._e(),n("div",{staticClass:"row"},[e._v("\n    username\n    "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"input",attrs:{type:"text",autofocus:"true"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),n("div",{staticClass:"row"},[e._v("\n    password\n    "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input",attrs:{type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),n("button",{staticClass:"button",on:{click:function(t){return t.preventDefault(),e.postSignin()}}},[e._v("Login")])])},Q=[],Z=i["a"].extend({name:"SigninForm",data:function(){return{username:"",password:""}},computed:a["a"]({},Object(o["e"])(["hasSigninError"])),methods:a["a"]({},Object(o["b"])({signin:p}),Object(o["d"])({closeModal:w,showSigninError:b,hideSigninError:S}),{postSignin:function(){return a["b"](this,void 0,void 0,function(){var e;return a["c"](this,function(t){switch(t.label){case 0:return e={username:this.username,password:this.password},[4,this.signin(e)];case 1:return t.sent(),[2]}})})}}),watch:{username:function(){this.hideSigninError()},password:function(){this.hideSigninError()}}}),ee=Z,te=(n("87ce"),Object(D["a"])(ee,Y,Q,!1,null,"1867b9f3",null)),ne=te.exports,ie=i["a"].extend({name:"Modal",components:{SignupForm:X,SigninForm:ne},computed:a["a"]({},Object(o["e"])(["modalType"])),methods:a["a"]({},Object(o["d"])({closeModal:w}))}),se=ie,re=(n("b72f"),Object(D["a"])(se,F,W,!1,null,"f7f77af6",null)),ae=re.exports,oe=i["a"].extend({name:"App",components:{Header:L,Drawer:V,Modal:ae},computed:a["a"]({},Object(o["e"])(["isModalOpen"]))}),ce=oe,ue=Object(D["a"])(ce,s,r,!1,null,null,null),le=ue.exports,de=n("8c4f"),me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mdl-grid"},[n("div",{staticClass:"mdl-cell"},[n("Editor",{attrs:{"editor-id":"main-editor"}})],1),n("div",{class:["edit"===e.view_mode?"mdl-cell":"fullsize","mdl-cell"],on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.toggleVewMode()}}},[n("Preview")],1)])},pe=[],fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editor",attrs:{id:e.editorId}})},ve=[],_e=n("061c"),he=(n("c1a9"),n("62a2"),n("0f22"),i["a"].extend({name:"Editor",props:{editorId:String},data:function(){return{editor:_e["edit"](document.createElement("div"))}},computed:a["a"]({},Object(o["e"])(["editor_content"])),methods:a["a"]({},Object(o["d"])({changeEditorContent:k,changeSlideNumber:R})),mounted:function(){var e=this;this.editor=_e["edit"](this.editorId),this.editor.getSession().setMode("ace/mode/markdown"),this.editor.setTheme("ace/theme/github"),this.editor.setKeyboardHandler("ace/keyboard/vim"),this.editor.getSession().on("change",function(){e.changeEditorContent(e.editor.getValue())});var t=function(t){for(var n=e.editor.getValue().split("\n"),i="",s=0,r=0,a=0;a<=t;a++)"---"===i.substring(0,3)?(s+=1,r=0):"==="===i.substring(0,3)&&(r+=1),i=n[a];return{h:s,v:r}};this.editor.getSession().selection.on("changeCursor",function(n){var i=e.editor.getCursorPosition().row,s=t(i);e.changeSlideNumber(s)})},watch:{editor_content:function(){var e=this.editor.getValue();e!==this.editor_content&&this.editor.setValue(this.editor_content)}}})),we=he,ge=(n("681f"),Object(D["a"])(we,fe,ve,!1,null,"35246c12",null)),be=ge.exports,Se=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ee=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reveal"},[n("div",{staticClass:"slides"})])}];window.Reveal=window.Reveal||{},window.RevealMarkdown=window.RevealMarkdown||{};var Ce=i["a"].extend({name:"Preview",data:function(){return{is_script_loading:!1}},computed:a["a"]({},Object(o["e"])(["editor_content","slide_number","view_mode"])),created:function(){var e=this;this.$root.$on("loading_script",function(t){e.is_script_loading=!0})},mounted:function(){var e=this;e.setContent(this.editor_content),e.$store.watch(function(){return e.editor_content},function(){e.setContent(e.editor_content),e.updateSlides()}),e.$store.watch(function(){return e.slide_number},function(){return window.Reveal.slide(e.slide_number.h,e.slide_number.v)}),e.$store.watch(function(){return e.view_mode},function(){return window.Reveal.sync()}),window.Reveal.initialize({width:1280,height:800,controls:!0,progress:!0,history:!0,mouseWheel:!0,center:!0,overview:!0,previewLinks:!0,slideNumber:"c/t",transition:"none",math:{mathjax:"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js",config:"TeX-AMS_HTML-full"},dependencies:[{src:"reveal.js/plugin/markdown/marked.js",condition:function(){return!!document.querySelector("[data-markdown]")}},{src:"reveal.js/plugin/markdown/markdown.js",condition:function(){return!!document.querySelector("[data-markdown]")}},{src:"reveal.js/plugin/highlight/highlight.js",async:!0},{src:"reveal.js/plugin/notes/notes.js",async:!0},{src:"reveal.js/plugin/math/math.js",async:!0}]})},methods:{setContent:function(e){var t=document.createElement("script");t.setAttribute("type","text/template"),t.textContent=e;var n=document.createElement("section");n.setAttribute("data-markdown",""),n.setAttribute("data-separator","^---"),n.setAttribute("data-separator-vertical","^==="),n.setAttribute("data-separator-notes","^Note:"),n.appendChild(t);var i=document.getElementsByClassName("slides")[0];i&&(i.textContent=null,i.appendChild(n))},updateSlides:function(){window.RevealMarkdown.init().then(function(){window.Reveal.toggleOverview(),window.Reveal.toggleOverview(),window.Reveal.sync()})}}}),Oe=Ce,ye=(n("6452"),Object(D["a"])(Oe,Se,Ee,!1,null,"551407d5",null)),je=ye.exports,xe=i["a"].extend({name:"edit",computed:a["a"]({},Object(o["c"])(["view_mode"])),methods:a["a"]({},Object(o["d"])({toggleVewMode:N})),components:{Header:L,Drawer:V,Editor:be,Preview:je}}),Me=xe,Ne=(n("f358"),Object(D["a"])(Me,me,pe,!1,null,"bc723cf4",null)),ke=Ne.exports;i["a"].use(de["a"]);var Re,Te,Ie=new de["a"]({routes:[{path:"*",name:"edit",component:ke}]}),De=n("bc3a"),Pe=n.n(De);i["a"].use(o["a"]);var Le={user:null,hasSigninError:!1,hasSignupError:!1,isModalOpen:!1,modalType:"signup",editor_content:"# Hello, world.",slide_number:{h:0,v:0},view_mode:"edit",slides:$e()},He=new o["a"].Store({state:Le,mutations:(Re={},Re[h]=function(e){e.isModalOpen=!0},Re[w]=function(e){e.isModalOpen=!1},Re[g]=function(e,t){e.modalType=t},Re[b]=function(e){e.hasSigninError=!0},Re[S]=function(e){e.hasSigninError=!1},Re[E]=function(e){e.hasSignupError=!0},Re[C]=function(e){e.hasSignupError=!1},Re[O]=function(e,t){e.user=t},Re[y]=function(e){e.user=null},Re[j]=function(e,t){e.slides=t},Re[x]=function(e){e.slides=[]},Re[k]=function(e,t){e.editor_content=t},Re[R]=function(e,t){e.slide_number=t},Re[M]=function(e,t){e.view_mode=t},Re[N]=function(e){e.view_mode="edit"===e.view_mode?"show":"edit"},Re),actions:(Te={},Te[l]=function(e){var t=e.commit;t(g,"signup"),t(h)},Te[d]=function(e){var t=e.commit;t(g,"signin"),t(h)},Te[m]=function(e,t){var n=e.commit;return a["b"](this,void 0,void 0,function(){var e,i,s;return a["c"](this,function(r){switch(r.label){case 0:e=new URLSearchParams,e.append("name",t.username),e.append("password",t.password),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,Pe.a.post("http://localhost/api/signup",e)];case 2:return i=r.sent(),200!==i.status?[3,4]:[4,this.dispatch(p,t)];case 3:r.sent(),r.label=4;case 4:return[3,6];case 5:throw s=r.sent(),n(E),s;case 6:return[2]}})})},Te[p]=function(e,t){var n=e.commit;return a["b"](this,void 0,void 0,function(){var e,i,s;return a["c"](this,function(r){switch(r.label){case 0:e=new URLSearchParams,e.append("name",t.username),e.append("password",t.password),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,Pe.a.post("http://localhost/api/signin",e)];case 2:return i=r.sent(),200!==i.status?[3,4]:(n(O,i.data),n(w),[4,this.dispatch(v)]);case 3:r.sent(),r.label=4;case 4:return[3,6];case 5:throw s=r.sent(),n(b),s;case 6:return[2]}})})},Te[f]=function(e){var t=e.commit;return a["b"](this,void 0,void 0,function(){var e,n,i;return a["c"](this,function(s){switch(s.label){case 0:e=new URLSearchParams,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,Pe.a.post("http://localhost/api/signout",e)];case 2:return n=s.sent(),200===n.status&&(t(y),t(x)),[3,4];case 3:throw i=s.sent(),i;case 4:return[2]}})})},Te[v]=function(e){var t=e.commit;return a["b"](this,void 0,void 0,function(){var e,n;return a["c"](this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Pe.a.get("/api/slides")];case 1:return e=i.sent(),200===e.status&&t(j,e.data),[3,3];case 2:throw n=i.sent(),n;case 3:return[2]}})})},Te[_]=function(e,t){var n=e.commit;return a["b"](this,void 0,void 0,function(){var e,i;return a["c"](this,function(s){switch(s.label){case 0:if(t.content)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,Pe.a.get("/api/slide/"+t.access_token)];case 2:return e=s.sent(),200===e.status&&(t=e.data),[3,4];case 3:throw i=s.sent(),i;case 4:return n(k,t.content),[2]}})})},Te),getters:{editor_content:function(e){return e.editor_content},slide_number:function(e){return e.slide_number},view_mode:function(e){return e.view_mode}}});function $e(){var e={id:10,user_id:1,access_token:"HOGEhoge",public:!1,name:"This is a dummy slide name.",content:"# Hello, world!",created_at:"2019-05-02T18:43:59+09:00",updated_at:"2019-05-02T18:43:59+09:00"},t={id:10,user_id:1,access_token:"HOGEhoge",public:!0,name:"This is public slide.",content:"# Hello, public world!",created_at:"2019-05-02T18:43:59+09:00",updated_at:"2019-05-02T18:43:59+09:00"};return[e,t]}i["a"].config.productionTip=!1,new i["a"]({router:Ie,store:He,render:function(e){return e(le)}}).$mount("#app")},e838:function(e,t,n){},f358:function(e,t,n){"use strict";var i=n("c0ec"),s=n.n(i);s.a}});
//# sourceMappingURL=app.9d477553.js.map